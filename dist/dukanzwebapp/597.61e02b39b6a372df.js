"use strict";(self.webpackChunkmatx_angular_latest_test=self.webpackChunkmatx_angular_latest_test||[]).push([[597],{34597:(te,N,d)=>{d.r(N),d.d(N,{ManagmentModule:()=>Gt});var w=d(19132),C=d(36895),c=d(24006),F=d(69814),P=d(80529),s=d(15861),T=d(64541),x=d(54004),h=d(65938),t=d(94650),_=d(61135);let A=(()=>{class e{constructor(o){this.http=o,this.baseUrl="https://dukanzapi.azurewebsites.net/api/"}get(o){return console.log("api called "+this.baseUrl+o),this.http.get(this.baseUrl+o)}post(o,r){return this.http.post(this.baseUrl+o,r)}put(o,r){return this.http.put(this.baseUrl+o,r)}delete(o,r){return this.http.delete(this.baseUrl+o,{body:r})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(P.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),f=(()=>{class e{constructor(o){this.apiService=o,this.productCategories=new _.X([]),this.startTimer()}getCategories(){try{this.apiService.get("ProductCategory").subscribe(o=>{this.productCategories.next(o),console.log("Product categories updated. Count:",o.length)},o=>{console.error("Error getting product categories:",o)}),console.log("getCategories()")}catch(o){console.error("Error getting product categories:",o)}return console.log("this.productCategories.asObservable():",this.productCategories.value.length),this.productCategories.asObservable()}newGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(o){const r=16*Math.random()|0;return("x"===o?r:3&r|8).toString(16)})}saveNewCategory(o){var r=this;return(0,s.Z)(function*(){try{o.id=r.newGuid(),o.partitionKey=o.id,yield r.apiService.post("ProductCategory",o).toPromise(),console.log("New category saved successfully.")}catch(n){console.error("Error saving category:",n)}})()}updateCategory(o){var r=this;return(0,s.Z)(function*(){try{yield r.apiService.put("ProductCategory",o).toPromise(),console.log("Category updated successfully.")}catch(n){console.error("Error updating category:",n)}})()}deleteCategory(o){var r=this;return(0,s.Z)(function*(){try{yield r.apiService.delete("ProductCategory",o).toPromise(),console.log("Category deleted successfully.")}catch(n){console.error("Error deleting category:",n)}})()}startTimer(){this.timer=setInterval(()=>{console.log("Count of product categories:",this.productCategories.value.length)},5e3)}stopTimer(){clearInterval(this.timer)}ngOnDestroy(){this.stopTimer()}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(A))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var D=d(56709),y=d(4859),Z=d(59549),U=d(44144),q=d(44850),g=d(73546),p=d(1576);let b=(()=>{class e{constructor(o){this.el=o}onKeyDown(o){let r=o;if(this.OnlyNumber){if(-1!==[46,8,9,27,13,110,190].indexOf(r.keyCode)||65===r.keyCode&&(r.ctrlKey||r.metaKey)||67===r.keyCode&&(r.ctrlKey||r.metaKey)||86===r.keyCode&&(r.ctrlKey||r.metaKey)||88===r.keyCode&&(r.ctrlKey||r.metaKey)||r.keyCode>=35&&r.keyCode<=39)return;(r.shiftKey||r.keyCode<48||r.keyCode>57)&&(r.keyCode<96||r.keyCode>105)&&r.preventDefault()}}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(t.SBq))},e.\u0275dir=t.lG2({type:e,selectors:[["","OnlyNumber",""]],hostBindings:function(o,r){1&o&&t.NdJ("keydown",function(i){return r.onKeyDown(i)})},inputs:{OnlyNumber:"OnlyNumber"}}),e})();function Q(e,a){1&e&&(t.TgZ(0,"small",15),t._uU(1," Catagory Name required "),t.qZA())}function R(e,a){1&e&&(t.TgZ(0,"small",15),t._uU(1," URL required "),t.qZA())}let M=(()=>{class e{constructor(o,r,n,i){this.catagoryData=o,this.catagoryService=r,this.dialogRef=n,this.formBuilder=i,this.mode=""}ngOnInit(){console.log("this.catagoryData ",this.catagoryData.id),this.catagoryData.id?this.mode="Edit":(this.mode="New",this.catagoryData.visible=!0,this.catagoryData.productCategoryName="",this.catagoryData.productCategoryImageURL="",this.catagoryData.order=0),this.catagoryForm=this.formBuilder.group({productCategoryName:["",c.kI.required],productCategoryImageURL:["",c.kI.required],visible:[""],order:["",c.kI.required]})}onSubmit(){var o=this;return(0,s.Z)(function*(){if("New"===o.mode)try{yield o.catagoryService.saveNewCategory(o.catagoryData),o.dialogRef.close()}catch(r){console.error("Error saving category:",r)}else try{yield o.catagoryService.updateCategory(o.catagoryData),console.log("Update Category Completed"),o.dialogRef.close()}catch(r){console.error("Error updating category:",r)}})()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(h.WI),t.Y36(f),t.Y36(h.so),t.Y36(c.qu))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-catagory"]],decls:25,vars:8,consts:[[1,"p-0"],[1,""],[1,"card-title-text"],[3,"formGroup"],["fxLayout","row wrap"],["fxFlex","200","fxFlex.gt-xs","100",1,"pr-8"],[1,"pb-8"],[1,"full-width"],["matInput","","name","productCategoryName","formControlName","productCategoryName","placeholder","Catagory Name",3,"ngModel","ngModelChange"],["class","form-error-msg",4,"ngIf"],["matInput","","name","productCategoryImageURL","formControlName","productCategoryImageURL","placeholder","Catagory URL",3,"ngModel","ngModelChange"],[1,"pb-16","pt-8"],["name","visible","formControlName","visible",1,"pb-16",3,"ngModel","ngModelChange"],["OnlyNumber","true","matInput","","name","order","formControlName","order","placeholder","Order",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"form-error-msg"]],template:function(o,r){1&o&&(t.TgZ(0,"mat-card",0)(1,"mat-card-title",1)(2,"div",2),t._uU(3,"Catagory"),t.qZA(),t._UZ(4,"mat-divider"),t.qZA(),t.TgZ(5,"mat-card-content")(6,"form",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"mat-form-field",7)(11,"input",8),t.NdJ("ngModelChange",function(i){return r.catagoryData.productCategoryName=i}),t.qZA()(),t.YNc(12,Q,2,0,"small",9),t.qZA(),t.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"input",10),t.NdJ("ngModelChange",function(i){return r.catagoryData.productCategoryImageURL=i}),t.qZA()(),t.YNc(16,R,2,0,"small",9),t.qZA(),t.TgZ(17,"div",11)(18,"mat-checkbox",12),t.NdJ("ngModelChange",function(i){return r.catagoryData.visible=i}),t._uU(19,"Visible"),t.qZA()(),t.TgZ(20,"div",6)(21,"mat-form-field",7)(22,"input",13),t.NdJ("ngModelChange",function(i){return r.catagoryData.order=i}),t.qZA()()()()(),t.TgZ(23,"button",14),t.NdJ("click",function(){return r.onSubmit()}),t._uU(24,"Submit"),t.qZA()()()()),2&o&&(t.xp6(6),t.Q6J("formGroup",r.catagoryForm),t.xp6(5),t.Q6J("ngModel",r.catagoryData.productCategoryName),t.xp6(1),t.Q6J("ngIf",r.catagoryForm.controls.productCategoryName.touched&&r.catagoryForm.controls.productCategoryName.hasError("required")),t.xp6(3),t.Q6J("ngModel",r.catagoryData.productCategoryImageURL),t.xp6(1),t.Q6J("ngIf",!r.catagoryForm.controls.productCategoryImageURL.touched&&r.catagoryForm.controls.productCategoryImageURL.hasError("required")),t.xp6(2),t.Q6J("ngModel",r.catagoryData.visible),t.xp6(4),t.Q6J("ngModel",r.catagoryData.order),t.xp6(1),t.Q6J("disabled",r.catagoryForm.invalid))},dependencies:[C.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,D.oG,y.lW,Z.KE,U.Nt,q.d,g.a8,g.dn,g.n5,p.xw,p.yH,b]}),e})();class k{constructor(a){this.id=a.id,this.partitionKey=a.partitionKey,this.productCategoryName=a.productCategoryName,this.productCategoryImageURL=a.productCategoryImageURL,this.visible=a.visible,this.order=a.order}}var l=d(30671),O=d(77331),I=d(97392);function L(e,a){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Name"),t.qZA())}function E(e,a){if(1&e&&(t.TgZ(0,"td",16)(1,"div",17)(2,"p",18),t._uU(3),t.qZA()()()),2&e){const o=a.$implicit;t.xp6(3),t.hij(" ",o.productCategoryName," ")}}function B(e,a){1&e&&(t.TgZ(0,"th",15),t._uU(1,"URL"),t.qZA())}function H(e,a){if(1&e&&(t.TgZ(0,"td",16)(1,"div",17),t._UZ(2,"img",19),t.qZA()()),2&e){const o=a.$implicit;t.xp6(2),t.s9C("src",o.productCategoryImageURL,t.LSH)}}function $(e,a){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Visible"),t.qZA())}function K(e,a){if(1&e&&(t.TgZ(0,"td",20)(1,"mat-chip",21),t._uU(2),t.qZA()()),2&e){const o=a.$implicit;t.xp6(2),t.hij(" ",o.visible," ")}}function G(e,a){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Order"),t.qZA())}function z(e,a){if(1&e&&(t.TgZ(0,"td",20)(1,"mat-chip",21),t._uU(2),t.qZA()()),2&e){const o=a.$implicit;t.xp6(2),t.hij(" ",o.order," ")}}function X(e,a){1&e&&(t.TgZ(0,"th",15),t._uU(1,"Order"),t.qZA())}function W(e,a){1&e&&(t.TgZ(0,"td",20)(1,"button",22)(2,"mat-icon",23),t._uU(3," edit "),t.qZA()()())}function V(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"mat-header-cell")(1,"button",24),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.addNew())}),t.TgZ(2,"mat-icon",25),t._uU(3,"add"),t.qZA()()()}}function j(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"mat-cell")(1,"button",26),t.NdJ("click",function(){const n=t.CHM(o),i=n.index,u=n.$implicit,m=t.oxw();return t.KtG(m.editItem(i,u))}),t.TgZ(2,"mat-icon",27),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",26),t.NdJ("click",function(){const n=t.CHM(o),i=n.index,u=n.$implicit,m=t.oxw();return t.KtG(m.deleteItem(i,u))}),t.TgZ(5,"mat-icon",28),t._uU(6,"delete"),t.qZA()()()}}function tt(e,a){1&e&&t._UZ(0,"tr",29)}function et(e,a){1&e&&t._UZ(0,"tr",30)}let ot=(()=>{class e{constructor(o,r,n){this.catagoryService=o,this.dialog=r,this.productCategoriesData=n,this.displayedColumns=["productCategoryName","productCategoryImageURL","visible","order","actions"],this.objectCount=0,this.productCategoriesForTable$=this.catagoryService.productCategories.asObservable().pipe((0,x.U)(i=>(this.productCategoriesData.data=i,console.log("Data loaded"),this.productCategoriesData)))}ngAfterViewInit(){}ngOnInit(){console.log("Data service called"),this.catagoryService.getCategories()}addNew(){this.dialog.open(M,{data:new k({id:"",partitionKey:"",productCategoryName:"",productCategoryImageURL:"",visible:!1,order:0})}).afterClosed().subscribe(r=>{this.catagoryService.getCategories()})}editItem(o,r){var n=this;this.dialog.open(M,{data:r}).afterClosed().subscribe(function(){var u=(0,s.Z)(function*(m){if(m)try{yield n.catagoryService.updateCategory(m),n.catagoryService.getCategories()}catch(v){console.error("Error updating category:",v)}});return function(m){return u.apply(this,arguments)}}())}deleteItem(o,r){var n=this;return(0,s.Z)(function*(){if(confirm("Are you sure to delete "+r.productCategoryName))try{yield n.catagoryService.deleteCategory(r),n.productCategoriesData.data.splice(o,1),n.productCategoriesData._updateChangeSubscription()}catch(i){console.error("Error deleting category:",i)}})()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(f),t.Y36(h.uw),t.Y36(l.by))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-catagory"]],decls:23,vars:5,consts:[["fxLayout","row wrap",1,"p-0","overflow-x-auto"],["mat-table","","fxFlex","",1,"mat-elevation-z1","min-w-600",3,"dataSource"],["matColumnDef","productCategoryName"],["mat-header-cell","",4,"matHeaderCellDef"],["class","py-12","mat-cell","",4,"matCellDef"],["matColumnDef","productCategoryImageURL"],["matColumnDef","visible"],["mat-cell","",4,"matCellDef"],["matColumnDef","order"],["matColumnDef","Order"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"py-12"],["fxLayout","row wrap","fxLayoutAlign","start center"],[1,"m-0","ml-12","text-capitalize"],[1,"avatar-sm","rounded-circle",3,"src"],["mat-cell",""],[1,"align-middle","py-4","px-8"],["mat-icon-button",""],[1,"mat-18","mat-color-primary"],["mat-icon-button","","color","primary",3,"click"],["aria-label","Example icon-button with a heart icon"],["mat-icon-button","","color","accent",3,"click"],["aria-label","Edit"],["aria-label","Delete"],["mat-header-row",""],["mat-row",""]],template:function(o,r){1&o&&(t.TgZ(0,"mat-card",0)(1,"table",1),t.ALo(2,"async"),t.ynx(3,2),t.YNc(4,L,2,0,"th",3),t.YNc(5,E,4,1,"td",4),t.BQk(),t.ynx(6,5),t.YNc(7,B,2,0,"th",3),t.YNc(8,H,3,1,"td",4),t.BQk(),t.ynx(9,6),t.YNc(10,$,2,0,"th",3),t.YNc(11,K,3,1,"td",7),t.BQk(),t.ynx(12,8),t.YNc(13,G,2,0,"th",3),t.YNc(14,z,3,1,"td",7),t.BQk(),t.ynx(15,9),t.YNc(16,X,2,0,"th",3),t.YNc(17,W,4,0,"td",7),t.BQk(),t.ynx(18,10),t.YNc(19,V,4,0,"mat-header-cell",11),t.YNc(20,j,7,0,"mat-cell",12),t.BQk(),t.YNc(21,tt,1,0,"tr",13),t.YNc(22,et,1,0,"tr",14),t.qZA()()),2&o&&(t.xp6(1),t.Q6J("dataSource",t.lcZ(2,3,r.productCategoriesForTable$)),t.xp6(20),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns))},dependencies:[y.lW,g.a8,O.HS,I.Hw,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,p.xw,p.Wh,p.yH,C.Ov],data:{animation:T.i}}),e})();class rt{constructor(a,o,r,n,i,u,m,v,zt,Xt,Wt,Vt,jt){this.id=a,this.productName=o,this.orignalPrice=r,this.currentPrice=n,this.currentCost=i,this.unitName=u,this.displayPercentage=m,this.imageURL=v,this.visible=zt,this.order=Xt,this.productCategoryId=Wt,this.productDescription=Vt,this.displayUnitName=jt}}let S=(()=>{class e{constructor(o){this.apiService=o,this.products=new _.X([]),this.loadProducts()}getProducts(){return this.products.asObservable()}loadProducts(){var o=this;return(0,s.Z)(function*(){try{const r=yield o.apiService.get("product").toPromise();o.products.next(r),console.log("Products updated."),console.log("Products count. "+r.length.toString())}catch(r){console.error("Error getting products:",r)}})()}addProduct(o){var r=this;return(0,s.Z)(function*(){try{const n=yield r.apiService.post("product",o).toPromise();r.products.next([...r.products.value,n]),console.log("New product added successfully.")}catch(n){console.error("Error adding product:",n)}})()}updateProduct(o){var r=this;return(0,s.Z)(function*(){try{yield r.apiService.put("product",o).toPromise(),console.log("Product updated successfully.")}catch(n){console.error("Error updating product:",n)}})()}deleteProduct(o){var r=this;return(0,s.Z)(function*(){try{yield r.apiService.delete("product",o).toPromise();const n=r.products.value.filter(i=>i.id!==o.id);r.products.next(n),console.log("Product deleted successfully.")}catch(n){console.error("Error deleting product:",n)}})()}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(A))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var at=d(3238),nt=d(84385);function it(e,a){1&e&&(t.TgZ(0,"small",23),t._uU(1,"Product Name required "),t.qZA())}function ct(e,a){if(1&e&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.productCategoryName)}}function dt(e,a){1&e&&(t.TgZ(0,"small",23),t._uU(1,"Product Category required"),t.qZA())}function lt(e,a){1&e&&(t.TgZ(0,"small",23),t._uU(1,"Product Description required "),t.qZA())}function ut(e,a){1&e&&(t.TgZ(0,"small",23),t._uU(1,"Original Price required "),t.qZA())}function st(e,a){1&e&&(t.TgZ(0,"small",23),t._uU(1,"Current Price required "),t.qZA())}function mt(e,a){1&e&&(t.TgZ(0,"small",23),t._uU(1,"Current Cost required "),t.qZA())}function pt(e,a){1&e&&(t.TgZ(0,"small",23),t._uU(1,"Unit Name required "),t.qZA())}function gt(e,a){1&e&&(t.TgZ(0,"small",23),t._uU(1,"Display Percentage required "),t.qZA())}function Ct(e,a){1&e&&(t.TgZ(0,"small",23),t._uU(1,"Display Unit Name required "),t.qZA())}function ht(e,a){1&e&&(t.TgZ(0,"small",23),t._uU(1,"Image URL required "),t.qZA())}function ft(e,a){1&e&&(t.TgZ(0,"small",23),t._uU(1,"Order required "),t.qZA())}let J=(()=>{class e{constructor(o,r,n,i,u){this.formBuilder=o,this.categoryService=r,this.productService=n,this.dialogRef=i,this.data=u,this.productCategories=[],this.mode=u.mode}ngOnInit(){this.productData=new rt("","",0,0,0,"",0,"",!1,0),this.selectedCategory="",this.productForm=this.formBuilder.group({productName:[this.productData.productName,c.kI.required],productDescription:[this.productData.productDescription,c.kI.required],orignalPrice:[this.productData.orignalPrice,c.kI.required],currentPrice:[this.productData.currentPrice,c.kI.required],currentCost:[this.productData.currentCost,c.kI.required],unitName:[this.productData.unitName,c.kI.required],displayPercentage:[this.productData.displayPercentage,c.kI.required],displayUnitName:[this.productData.displayUnitName,c.kI.required],imageURL:[this.productData.imageURL,c.kI.required],visible:[this.productData.visible,c.kI.required],order:[this.productData.order,c.kI.required],productCategoryId:[this.selectedCategory,c.kI.required]}),this.loadProductCategories(),"Existing"===this.mode&&(this.productData=this.data.selectedProduct,this.selectedCategory=this.productData.productCategoryId)}loadProductCategories(){this.categoryService.getCategories().subscribe(o=>{this.productCategories=o},o=>{console.error("Error fetching product categories:",o)})}onSelectCategory(o){this.selectedCategory=o}saveProduct(){var o=this;return(0,s.Z)(function*(){try{"New"===o.mode?(console.log("this.productService.addProduct(this.productForm.value)"),yield o.productService.addProduct(o.productForm.value)):"Existing"===o.mode&&(console.log("this.productService.updateProduct({...this.productForm.value, id: this.productData.id})"),yield o.productService.updateProduct({...o.productForm.value,id:o.productData.id})),o.dialogRef.close()}catch(r){console.error("Error saving product:",r)}})()}deleteProduct(){var o=this;return(0,s.Z)(function*(){try{yield o.productService.deleteProduct(o.productData),o.dialogRef.close()}catch(r){console.error("Error deleting product:",r)}})()}closeDialog(){this.dialogRef.close()}onSubmit(){this.productForm.invalid||this.saveProduct()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(c.qu),t.Y36(f),t.Y36(S),t.Y36(h.so),t.Y36(h.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-product"]],decls:63,vars:26,consts:[[1,"p-0"],[1,""],[1,"card-title-text"],[3,"formGroup"],["fxLayout","row wrap"],["fxFlex","200","fxFlex.gt-xs","100",1,"pr-8"],[1,"pb-8"],[1,"full-width"],["matInput","","name","productName","formControlName","productName","placeholder","Product Name",3,"ngModel","ngModelChange"],["class","form-error-msg",4,"ngIf"],["formControlName","productCategoryId",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","name","productDescription","formControlName","productDescription","placeholder","Product Description",3,"ngModel","ngModelChange"],["matInput","","name","orignalPrice","formControlName","orignalPrice","placeholder","Original Price",3,"ngModel","ngModelChange"],["matInput","","name","currentPrice","formControlName","currentPrice","placeholder","Current Price",3,"ngModel","ngModelChange"],["matInput","","name","currentCost","formControlName","currentCost","placeholder","Current Cost",3,"ngModel","ngModelChange"],["matInput","","name","unitName","formControlName","unitName","placeholder","Unit Name",3,"ngModel","ngModelChange"],["matInput","","name","displayPercentage","formControlName","displayPercentage","placeholder","Display Percentage",3,"ngModel","ngModelChange"],["matInput","","name","displayUnitName","formControlName","displayUnitName","placeholder","Display Unit Name",3,"ngModel","ngModelChange"],["matInput","","name","imageURL","formControlName","imageURL","placeholder","Image URL",3,"ngModel","ngModelChange"],["name","visible","formControlName","visible",1,"pb-16",3,"ngModel","ngModelChange"],["OnlyNumber","true","matInput","","name","order","formControlName","order","placeholder","Order",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"form-error-msg"],[3,"value"]],template:function(o,r){1&o&&(t.TgZ(0,"mat-card",0)(1,"mat-card-title",1)(2,"div",2),t._uU(3,"Product"),t.qZA(),t._UZ(4,"mat-divider"),t.qZA(),t.TgZ(5,"mat-card-content")(6,"form",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"mat-form-field",7)(11,"input",8),t.NdJ("ngModelChange",function(i){return r.productData.productName=i}),t.qZA()(),t.YNc(12,it,2,0,"small",9),t.qZA(),t.TgZ(13,"div",6)(14,"mat-form-field",7)(15,"mat-label"),t._uU(16,"Product Category"),t.qZA(),t.TgZ(17,"mat-select",10),t.NdJ("ngModelChange",function(i){return r.productData.productCategoryId=i})("selectionChange",function(){return r.onSelectCategory(r.productData.productCategoryId)}),t.TgZ(18,"mat-option"),t._uU(19,"-- Select Category --"),t.qZA(),t.YNc(20,ct,2,2,"mat-option",11),t.qZA()(),t.YNc(21,dt,2,0,"small",9),t.qZA(),t.TgZ(22,"div",6)(23,"mat-form-field",7)(24,"input",12),t.NdJ("ngModelChange",function(i){return r.productData.productDescription=i}),t.qZA()(),t.YNc(25,lt,2,0,"small",9),t.qZA(),t.TgZ(26,"div",6)(27,"mat-form-field",7)(28,"input",13),t.NdJ("ngModelChange",function(i){return r.productData.orignalPrice=i}),t.qZA()(),t.YNc(29,ut,2,0,"small",9),t.qZA(),t.TgZ(30,"div",6)(31,"mat-form-field",7)(32,"input",14),t.NdJ("ngModelChange",function(i){return r.productData.currentPrice=i}),t.qZA()(),t.YNc(33,st,2,0,"small",9),t.qZA(),t.TgZ(34,"div",6)(35,"mat-form-field",7)(36,"input",15),t.NdJ("ngModelChange",function(i){return r.productData.currentCost=i}),t.qZA()(),t.YNc(37,mt,2,0,"small",9),t.qZA(),t.TgZ(38,"div",6)(39,"mat-form-field",7)(40,"input",16),t.NdJ("ngModelChange",function(i){return r.productData.unitName=i}),t.qZA()(),t.YNc(41,pt,2,0,"small",9),t.qZA(),t.TgZ(42,"div",6)(43,"mat-form-field",7)(44,"input",17),t.NdJ("ngModelChange",function(i){return r.productData.displayPercentage=i}),t.qZA()(),t.YNc(45,gt,2,0,"small",9),t.qZA(),t.TgZ(46,"div",6)(47,"mat-form-field",7)(48,"input",18),t.NdJ("ngModelChange",function(i){return r.productData.displayUnitName=i}),t.qZA()(),t.YNc(49,Ct,2,0,"small",9),t.qZA(),t.TgZ(50,"div",6)(51,"mat-form-field",7)(52,"input",19),t.NdJ("ngModelChange",function(i){return r.productData.imageURL=i}),t.qZA()(),t.YNc(53,ht,2,0,"small",9),t.qZA(),t.TgZ(54,"div",6)(55,"mat-checkbox",20),t.NdJ("ngModelChange",function(i){return r.productData.visible=i}),t._uU(56,"Visible"),t.qZA()(),t.TgZ(57,"div",6)(58,"mat-form-field",7)(59,"input",21),t.NdJ("ngModelChange",function(i){return r.productData.order=i}),t.qZA()(),t.YNc(60,ft,2,0,"small",9),t.qZA()()(),t.TgZ(61,"button",22),t.NdJ("click",function(){return r.onSubmit()}),t._uU(62,"Submit"),t.qZA()()()()),2&o&&(t.xp6(6),t.Q6J("formGroup",r.productForm),t.xp6(5),t.Q6J("ngModel",r.productData.productName),t.xp6(1),t.Q6J("ngIf",r.productForm.controls.productName.touched&&r.productForm.controls.productName.hasError("required")),t.xp6(5),t.Q6J("ngModel",r.productData.productCategoryId),t.xp6(3),t.Q6J("ngForOf",r.productCategories),t.xp6(1),t.Q6J("ngIf",r.productForm.controls.productCategoryId.touched&&r.productForm.controls.productCategoryId.hasError("required")),t.xp6(3),t.Q6J("ngModel",r.productData.productDescription),t.xp6(1),t.Q6J("ngIf",r.productForm.controls.productDescription.touched&&r.productForm.controls.productDescription.hasError("required")),t.xp6(3),t.Q6J("ngModel",r.productData.orignalPrice),t.xp6(1),t.Q6J("ngIf",r.productForm.controls.orignalPrice.touched&&r.productForm.controls.orignalPrice.hasError("required")),t.xp6(3),t.Q6J("ngModel",r.productData.currentPrice),t.xp6(1),t.Q6J("ngIf",r.productForm.controls.currentPrice.touched&&r.productForm.controls.currentPrice.hasError("required")),t.xp6(3),t.Q6J("ngModel",r.productData.currentCost),t.xp6(1),t.Q6J("ngIf",r.productForm.controls.currentCost.touched&&r.productForm.controls.currentCost.hasError("required")),t.xp6(3),t.Q6J("ngModel",r.productData.unitName),t.xp6(1),t.Q6J("ngIf",r.productForm.controls.unitName.touched&&r.productForm.controls.unitName.hasError("required")),t.xp6(3),t.Q6J("ngModel",r.productData.displayPercentage),t.xp6(1),t.Q6J("ngIf",r.productForm.controls.displayPercentage.touched&&r.productForm.controls.displayPercentage.hasError("required")),t.xp6(3),t.Q6J("ngModel",r.productData.displayUnitName),t.xp6(1),t.Q6J("ngIf",r.productForm.controls.displayUnitName.touched&&r.productForm.controls.displayUnitName.hasError("required")),t.xp6(3),t.Q6J("ngModel",r.productData.imageURL),t.xp6(1),t.Q6J("ngIf",r.productForm.controls.imageURL.touched&&r.productForm.controls.imageURL.hasError("required")),t.xp6(2),t.Q6J("ngModel",r.productData.visible),t.xp6(4),t.Q6J("ngModel",r.productData.order),t.xp6(1),t.Q6J("ngIf",r.productForm.controls.order.touched&&r.productForm.controls.order.hasError("required")),t.xp6(1),t.Q6J("disabled",!r.productForm.dirty))},dependencies:[C.sg,C.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,D.oG,y.lW,Z.KE,Z.hX,U.Nt,at.ey,nt.gD,q.d,g.a8,g.dn,g.n5,p.xw,p.yH,b]}),e})();function yt(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Product Name"),t.qZA())}function _t(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.productName)}}function Zt(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Product Description"),t.qZA())}function vt(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.productDescription)}}function Nt(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Original Price"),t.qZA())}function Pt(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.orignalPrice)}}function Tt(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Current Price"),t.qZA())}function xt(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.currentPrice)}}function At(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Current Cost"),t.qZA())}function Dt(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.currentCost)}}function Ut(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Unit Name"),t.qZA())}function qt(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.unitName)}}function bt(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Display Percentage"),t.qZA())}function Mt(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.displayPercentage)}}function It(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Display Unit Name"),t.qZA())}function St(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.displayUnitName)}}function Jt(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Image URL"),t.qZA())}function Yt(e,a){if(1&e&&(t.TgZ(0,"td",21),t._UZ(1,"img",22),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Q6J("src",o.imageURL,t.LSH)}}function wt(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Visible"),t.qZA())}function Ft(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.visible)}}function Qt(e,a){1&e&&(t.TgZ(0,"th",20),t._uU(1,"Order"),t.qZA())}function Rt(e,a){if(1&e&&(t.TgZ(0,"td",21),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Oqu(o.order)}}function kt(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"mat-header-cell")(1,"button",23),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.addNew())}),t.TgZ(2,"mat-icon",24),t._uU(3,"add"),t.qZA()()()}}function Ot(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"mat-cell")(1,"button",25),t.NdJ("click",function(){const i=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.editItem(i))}),t.TgZ(2,"mat-icon",26),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",25),t.NdJ("click",function(){const i=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.deleteItem(u.i,i))}),t.TgZ(5,"mat-icon",27),t._uU(6,"delete"),t.qZA()()()}}function Lt(e,a){1&e&&t._UZ(0,"tr",28)}function Et(e,a){1&e&&t._UZ(0,"tr",29)}const Y=function(){return["productName","productDescription","orignalPrice","currentPrice","currentCost","unitName","displayPercentage","displayUnitName","imageURL","visible","order","actions"]},Bt=[{path:"",children:[{path:"catagory",component:ot,data:{title:"Catagory",breadcrumb:"Catagory"}},{path:"product",component:(()=>{class e{constructor(o,r,n){this.productService=o,this.dialog=r,this.categoryService=n,this.productCategories=[],this.selectedCategory="",this.showAddProduct=!1,this.displayedColumns=["productName","productDescription","orignalPrice","currentPrice","currentCost","unitName","displayPercentage","displayUnitName","imageURL","visible","order","action"]}onSelectCategory(o){this.selectedCategory=o,console.log("Selected category:",this.selectedCategory)}showAddProductForm(){this.showAddProduct=!0}ngAfterViewInit(){}ngOnInit(){this.loadProductCategories(),this.productService.loadProducts().then(()=>{this.productsDataSource$=this.productService.getProducts().pipe((0,x.U)(o=>new l.by(o)))})}loadProductCategories(){this.categoryService.getCategories().subscribe(o=>{this.productCategories=o},o=>{console.error("Error fetching product categories:",o)})}addNew(){this.dialog.open(J,{data:{mode:"New",categories:this.productCategories}}).afterClosed().subscribe(r=>{r&&this.productService.loadProducts()})}editItem(o){var r=this;this.dialog.open(J,{data:{mode:"Existing",selectedProduct:o,categories:this.productCategories}}).afterClosed().subscribe(function(){var i=(0,s.Z)(function*(u){if(u)try{yield r.productService.updateProduct(u),r.productService.loadProducts()}catch(m){console.error("Error updating product:",m)}});return function(u){return i.apply(this,arguments)}}())}deleteItem(o,r){var n=this;return(0,s.Z)(function*(){if(confirm("Are you sure to delete "+r.productName))try{yield n.productService.deleteProduct(r);const i=(yield n.productsDataSource$.toPromise()).data;i.splice(o,1),n.productsDataSource$=new _.X(new l.by(i))}catch(i){console.error("Error deleting product:",i)}})()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(S),t.Y36(h.uw),t.Y36(f))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-product"]],decls:41,vars:7,consts:[["fxLayout","row wrap",1,"p-0","overflow-x-auto"],["mat-table","","fxFlex","",1,"mat-elevation-z1","min-w-600",3,"dataSource"],["matColumnDef","productName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","productDescription"],["matColumnDef","orignalPrice"],["matColumnDef","currentPrice"],["matColumnDef","currentCost"],["matColumnDef","unitName"],["matColumnDef","displayPercentage"],["matColumnDef","displayUnitName"],["matColumnDef","imageURL"],["matColumnDef","visible"],["matColumnDef","order"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["alt","Product Image",2,"max-width","50px","max-height","50px",3,"src"],["mat-icon-button","","color","primary",3,"click"],["aria-label","Add"],["mat-icon-button","","color","accent",3,"click"],["aria-label","Edit"],["aria-label","Delete"],["mat-header-row",""],["mat-row",""]],template:function(o,r){1&o&&(t.TgZ(0,"mat-card",0)(1,"table",1),t.ALo(2,"async"),t.ynx(3,2),t.YNc(4,yt,2,0,"th",3),t.YNc(5,_t,2,1,"td",4),t.BQk(),t.ynx(6,5),t.YNc(7,Zt,2,0,"th",3),t.YNc(8,vt,2,1,"td",4),t.BQk(),t.ynx(9,6),t.YNc(10,Nt,2,0,"th",3),t.YNc(11,Pt,2,1,"td",4),t.BQk(),t.ynx(12,7),t.YNc(13,Tt,2,0,"th",3),t.YNc(14,xt,2,1,"td",4),t.BQk(),t.ynx(15,8),t.YNc(16,At,2,0,"th",3),t.YNc(17,Dt,2,1,"td",4),t.BQk(),t.ynx(18,9),t.YNc(19,Ut,2,0,"th",3),t.YNc(20,qt,2,1,"td",4),t.BQk(),t.ynx(21,10),t.YNc(22,bt,2,0,"th",3),t.YNc(23,Mt,2,1,"td",4),t.BQk(),t.ynx(24,11),t.YNc(25,It,2,0,"th",3),t.YNc(26,St,2,1,"td",4),t.BQk(),t.ynx(27,12),t.YNc(28,Jt,2,0,"th",3),t.YNc(29,Yt,2,1,"td",4),t.BQk(),t.ynx(30,13),t.YNc(31,wt,2,0,"th",3),t.YNc(32,Ft,2,1,"td",4),t.BQk(),t.ynx(33,14),t.YNc(34,Qt,2,0,"th",3),t.YNc(35,Rt,2,1,"td",4),t.BQk(),t.ynx(36,15),t.YNc(37,kt,4,0,"mat-header-cell",16),t.YNc(38,Ot,7,0,"mat-cell",17),t.BQk(),t.YNc(39,Lt,1,0,"tr",18),t.YNc(40,Et,1,0,"tr",19),t.qZA()()),2&o&&(t.xp6(1),t.Q6J("dataSource",t.lcZ(2,3,r.productsDataSource$)),t.xp6(38),t.Q6J("matHeaderRowDef",t.DdM(5,Y)),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(6,Y)))},dependencies:[y.lW,g.a8,I.Hw,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,p.xw,p.yH,C.Ov],data:{animation:T.i}}),e})(),data:{title:"Product",breadcrumb:"Product"}}]}];var Ht=d(89383),$t=d(61937),Kt=d(62769);let Gt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[f,l.by],imports:[C.ez,c.u5,Ht.aw,c.UX,$t.m,F.o9,Kt.Xd,P.JF,w.Bz.forChild(Bt)]}),e})()}}]);